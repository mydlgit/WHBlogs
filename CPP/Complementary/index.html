<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>补充 - Note</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Note</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">C++ Base <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../c_base/callable.md" class="dropdown-item">callable</a>
</li>
                                    
<li>
    <a href="../../c_base/class.md" class="dropdown-item">class</a>
</li>
                                    
<li>
    <a href="../../c_base/Complementary.md" class="dropdown-item">complementary</a>
</li>
                                    
<li>
    <a href="../../c_base/const.md" class="dropdown-item">const</a>
</li>
                                    
<li>
    <a href="../../c_base/constructor_destructor.md" class="dropdown-item">constructor_destructor</a>
</li>
                                    
<li>
    <a href="../../c_base/container.md" class="dropdown-item">container</a>
</li>
                                    
<li>
    <a href="../../c_base/exception.md" class="dropdown-item">exception</a>
</li>
                                    
<li>
    <a href="../../c_base/function.md" class="dropdown-item">function</a>
</li>
                                    
<li>
    <a href="../../c_base/friend_template.md" class="dropdown-item">friend_template</a>
</li>
                                    
<li>
    <a href="../../c_base/initialization.md" class="dropdown-item">initialization</a>
</li>
                                    
<li>
    <a href="../../c_base/inline.md" class="dropdown-item">inline</a>
</li>
                                    
<li>
    <a href="../../c_base/inherit.md" class="dropdown-item">inherit</a>
</li>
                                    
<li>
    <a href="../../c_base/iterator.md" class="dropdown-item">iterator</a>
</li>
                                    
<li>
    <a href="../../c_base/memory.md" class="dropdown-item">memory</a>
</li>
                                    
<li>
    <a href="../../c_base/new_delete.md" class="dropdown-item">new_delete</a>
</li>
                                    
<li>
    <a href="../../c_base/pointer_reference.md" class="dropdown-item">pointer_reference</a>
</li>
                                    
<li>
    <a href="../../c_base/static.md" class="dropdown-item">static</a>
</li>
                                    
<li>
    <a href="../../c_base/virtual.md" class="dropdown-item">virtual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">EffectiveCPP <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../EffectiveCPP/rule.md" class="dropdown-item">RULES</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Linux os <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../os/0_index/" class="dropdown-item">home</a>
</li>
                                    
<li>
    <a href="../../os/1_introduction/" class="dropdown-item">1_开始</a>
</li>
                                    
<li>
    <a href="../../os/2_as86/" class="dropdown-item">2_汇编语法</a>
</li>
                                    
<li>
    <a href="../../os/3_80x86_protect_mode/" class="dropdown-item">3_保护模式</a>
</li>
                                    
<li>
    <a href="../../os/4_kernel_struct/" class="dropdown-item">4_内核体系结构</a>
</li>
                                    
<li>
    <a href="../../os/5_os/" class="dropdown-item">5_现代操作系统</a>
</li>
                                    
<li>
    <a href="../../os/7_simple_os/" class="dropdown-item">7_simple_os</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">MySQL <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../MySQL/0_start/" class="dropdown-item">home</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">DataStruct <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../DataStruct/Tree/" class="dropdown-item">Tree</a>
</li>
                                    
<li>
    <a href="../../DataStruct/Sort/" class="dropdown-item">Sort</a>
</li>
                                    
<li>
    <a href="../../DataStruct/Graph/" class="dropdown-item">Graph</a>
</li>
                                    
<li>
    <a href="../../DataStruct/OtherStruct/" class="dropdown-item">Others</a>
</li>
                                    
<li>
    <a href="../../DataStruct/Algorithm/" class="dropdown-item">Algorithm</a>
</li>
                                    
<li>
    <a href="../../DataStruct/API/" class="dropdown-item">API</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Network <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Network/home.md" class="dropdown-item">home</a>
</li>
                                    
<li>
    <a href="../../Network/1_application/" class="dropdown-item">application</a>
</li>
                                    
<li>
    <a href="../../Network/2_transport/" class="dropdown-item">transport</a>
</li>
                                    
<li>
    <a href="../../Network/3_network/" class="dropdown-item">network</a>
</li>
                                    
<li>
    <a href="../../Network/4_link/" class="dropdown-item">link</a>
</li>
                                    
<li>
    <a href="../../Network/5_netsafe/" class="dropdown-item">safe</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">interview <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../interview/" class="dropdown-item">面试</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#_1" class="nav-link">补充</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#_2" class="nav-link">类型转换</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#rtti" class="nav-link">RTTI</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#io" class="nav-link">IO流</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#ostringstream" class="nav-link">ostringstream</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#auto" class="nav-link">auto</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#decltype" class="nav-link">decltype</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#string" class="nav-link">string</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_3" class="nav-link">关于数组</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#sizeof" class="nav-link">sizeof</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#return" class="nav-link">return</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#volatile" class="nav-link">volatile</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#extern-c" class="nav-link">链接指示:extern C</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_4" class="nav-link">字节对齐</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_5" class="nav-link">字面值类型</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#using" class="nav-link">using</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_6" class="nav-link">命名空间</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#tips" class="nav-link">tips</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="_1">补充</h1>
<h2 id="_2">类型转换</h2>
<ul>
<li>reinterpret_cast<br />
&emsp;可以提供两个完全无关类型的指针/引用之间或指针和整数进行互转，比如将char*转换为double*。它对原始对象的位模式提供较低层次上的重新解释（即reinterpret），完全复制二进制比特位到目标对象，转换后的值与原始对象无关但比特位一致，前后无精度损失。(注意reinterpre对两种非指针/引用类型是不能互转的，类似int和double)</li>
</ul>
<pre><code class="language-C">     int* i;
     char *p = new char('c');
     i = reinterpret_cast&lt;int*&gt; (p);
     cout&lt;&lt;i&lt;&lt;endl;      //0x3f43d0
     cout&lt;&lt;p&lt;&lt;endl;      //0x3f4sd0
</code></pre>
<p>&emsp;用处: 比如开辟了系统全局的内存空间，需要在多个应用程序之间传递这个空间的指针时，就可以将指针转换成整数值，得到以后再将值转成指针进行对应的操作。</p>
<ul>
<li>
<p>static_cast: 强制类型转换，可以将expression转换为某种合理类型，但没有运行时类型检查来保证转换的安全性。<br />
&emsp;进行上行转换（把派生类的指针或引用转换成基类表示）是安全的;<br />
&emsp;进行下行转换（把基类指针或引用转换成派生类表示）时，由于没有动态类型检查，所以是不安全的;<br />
&emsp;用于基本数据类型之间的转换，如把int转换成char，把int转换成enum;<br />
&emsp;把空指针转换成目标类型的空指针;<br />
&emsp;把任何类型的表达式转换成void类型。<br />
&emsp;static_cast不能转换掉expression的const、volatile、或者__unaligned属性。</p>
</li>
<li>
<p>const_cast: 仅用于进行去除 const 属性的转换，它也是四个强制类型转换运算符中唯一能够去除 const 属性的运算符。  </p>
</li>
<li>dynamic_cast:   dynamic_cast&lt; type* &gt;(e); dynamic_cast&lt; type&amp; &gt; (e); dynamic&lt; type&amp;&amp; &gt;(e);  <br />
&emsp;第一种形式，e必须是一个有效指针；第二种形式，e必须是一个左值；第三种形式，e必须是右值；<br />
&emsp;e是目标type的公有派生类或者公有基类，或者就是type类型，如果符合条件，且转换安全，则转换成功；<br />
&emsp;若转换目标是一个指针，转换失败时，会返回NULL；若转换目标是引用类型，则抛出bad_cast异常。<br />
&emsp;dynamic_cast运算符可以在运行期决定真正的类型。如果 downcast 是安全的（也就说，如果基类指针或者引用确实指向一个派生类对象）这个运算符会传回适当转型过的指针。如果 downcast 不安全，这个运算符会传回空指针（也就是说，基类指针或者引用没有指向一个派生类对象）。</li>
</ul>
<h2 id="rtti">RTTI</h2>
<p>&emsp;运行时类型识别（Run-time type identification, RTTI）的功能由两个运算符实现：  </p>
<ul>
<li>typeid<br />
&emsp;返回表达式的类型, typeid(e)返回一个常量对象的引用，该对象的类型是标准库类型type_info或者type_info的公有派生类型。typeid(e).name()将类型名转换为string.<br />
&emsp;当运算对象不是类类型或者是一个不包含任何虚函数的类时，typeid运算符指示的是运算对象的静态类型；而运算对象是定义了至少一个虚函数的类的左值时，typeid的结果直到运行时才会知道。<br />
&emsp;typeid作用于函数或者数组时，不会执行向指针的标准类型转换; 当typeid作用于指针时，返回的结果是该指针的静态编译类型。(指针并非是一个类类型对象)  </li>
<li>
<p>dynamic_cast
&emsp;用于将基类的指针或引用安全地转换成派生类的指针或引用。<br />
当我们将这两个运算符用于某种类型的指针或引用，并且该类型含有虚函数，运算符将使用指针或引用绑定的对象的动态类型。</p>
</li>
<li>
<p>type_info：其拷贝和移动构造函数以及赋值运算符都被定义成删除的，创建type_info对象的唯一途径是使用typeid运算符。  </p>
</li>
</ul>
<h2 id="io">IO流</h2>
<ul>
<li>IO对象无拷贝或赋值，通常以引用方式传递和返回流。  </li>
<li><code>_istream &gt;&gt; word; getline(_istream, line);</code><br />
第一个string会存到word; 剩余的内容会存到line， 包含空格。 </li>
</ul>
<h2 id="ostringstream">ostringstream</h2>
<p>&emsp;使用前先包含标准头文件sstream, 其提供"内存内的的输出操作"，输出到一个string对象上，当我们需要将多种不同类型的数据格式化为字符串格式时，它可以将int、float等类型的数值自动转化为相应的string格式，而不必考虑存储空间、转换算法等问题。当存在未知数据大小的时候,可以使用 ostringstream 来代替 sprintf , 避免总是申请大量的缓冲区，
ostringstream提供的的一个member function str()，会返回"与ostringstream对象相呼应"的string对象。<br />
eg：</p>
<pre><code class="language-C">ostringstream oss;
string str;
oss &lt;&lt; “hello”&lt;&lt;1;
str = oss.str();    //萃取出string对象
</code></pre>
<h2 id="auto">auto</h2>
<p>&emsp;由编译器通过初始值来推算变量的类型，<strong>显然auto定义的变量必须有初始值</strong>。使用auto在一条语句中同时声明多个变量时，所有变量的初始数据类型必须一致。<br />
&emsp; Using auto is especially useful where the type is a pretty long or complicated expression, such as lambda.<br />
&emsp;编译器推断出的auto类型和初始值类型不一定完全一致:  </p>
<pre><code class="language-C">int i=0, &amp;r=i;
auto a=r;   //a类型是int，而非引用，因为r即只是i的一个别名, 其次，auto一般会忽略掉顶层const, 而底层const会被保留。
const int ci = i, &amp;cr=ci;
auto b = ci;    // b是一个整数
auto d = &amp;i;    //d是一个整数指针
auto e = &amp;ci;   //e是一个指向整数常量的指针。

// 若设置一个类型为auto的引用时，则顶层const属性会被保留，
auto &amp;g = ci;  //g是一个整型常量引用。
auto *p = &amp;ci;  //p是一个指向整型常量的指针
</code></pre>
<h2 id="decltype">decltype</h2>
<p>&emsp;find out the type of expression  </p>
<pre><code class="language-C">decltype(fun()) a;  //以函数fun的返回值类型作为a的数据类型
// decltype在处理顶层const时，与auto不同，会保留顶层const属性和引用。
const int ci =0, &amp;cj = ci;
decltype(ci) x = 0; // x类型为const int;
delctype(cj) y = x; // y类型为const int &amp;;
</code></pre>
<p>&emsp;decltype对于解引用操作得到的是引用类型，即decltype(*p)的结果类型是 type&amp;.
对于decltype所用的表达式来说，如果变量名外加上一对括号，则类型与不加括号会有所区别。
delcltype(i)结果类型为type, 则decltype((i))结果类型为type&amp;.<br />
&emsp;auto与decltype在处理数组类型时也有区别</p>
<pre><code class="language-C">int a[] = {1, 2};
decltype(a) b = {1, 2};     //b是一个由2个元素组成的数组，
auto c(a); //c 是一个整型指针，指向数组a的第一个元素
</code></pre>
<p>&emsp; Three applications of decltype, first is to declare return types; second is to use in metaprogramming; third is to pass the type of lambda。  </p>
<pre><code class="language-C">//eg. 3. 面对lambda，只有object，需要通过decltype获得其类型
auto cmp = [](const Persion&amp; p1, const Persion&amp; p2){
     return p1.lastname()&lt;p2.lastname || (p1.lastname() == p2.lastname() &amp;&amp; p1.firstname()&lt;p2.firstname());
};
std::set&lt;Persion, decltype(cmp)&gt; coll(cmp);  //cmp作为比较器传入
</code></pre>
<h2 id="string">string</h2>
<ul>
<li>加法操作，必须确保每个”+”两侧的运算对象至少一个是string，另一个可以是string、字符字面值、字符串字面值。</li>
</ul>
<h2 id="_3">关于数组</h2>
<ul>
<li>
<p>数组作为参数传递<br />
&emsp;有两种传递方法，一种是function(int a[]); 另一种是function(int *a)，这两种方法在函数中对数组参数的修改都会影响到实参本身的值，因此可以在数组形参前加上const，表示整个数组只读。<br />
&emsp;传递数组，虽然传递的是首地址地址，但是参数到了函数内就成了普通指针，不再是数组首地址了，所以试图在别的函数中得到传递数组的长度是行不通的。只能先计算好长度后再传过去，进行其他的运算。
计算 :&emsp;<code>sizeof(array)/sizeof(array[0])</code><br />
&emsp;若以数组引用作为参数，形式如下：<br />
<code>void test(int (&amp;array)[16]); //则传递参数时，大小也是数组类型的一部分，若数组长度不等于16，是无法传递的。</code>  </p>
</li>
<li>
<p>字符数组<br />
可以用字符串字面值对此类数组初始化，且需记住字符串字面值得结尾处有一个空字符，编译器会自动添加，因此数组大小应能够包含该空字符。  </p>
</li>
<li><strong>数组不允许拷贝和赋值</strong></li>
<li>内置的下标运算符类型不是无符号类型，而string、vector等标准库类型使用的下标运算符类型必须是无符号类型。  </li>
</ul>
<pre><code class="language-C">int a[]={1, 2, 3, 4};
int *p = &amp;a[3];
cout &lt;&lt; p[-2];  //输出2
</code></pre>
<ul>
<li>使用范围for语句处理多维数组，除了最内层的循环外，其他所有循环的控制变量都应该是引用类型。  </li>
<li>指向数组的指针<br />
格式:  <code>int (*p)[4] = ia; //p是一个指向含有4个整数的数组</code>  </li>
</ul>
<h2 id="sizeof">sizeof</h2>
<p>&emsp;sizeof 返回一条表达式或者一个类型名字所占的字节数；也可以作用于一个具体的对象
<code>sizeof(type); sizeof(expr); sizeof(object) 或 sizeof object</code>  </p>
<p>&emsp; sizeof(Class_name)得到的是所有非静态成员大小之和，如果该类包含虚函数，还需加上4个字节(32位机器)的虚指针大小；
&emsp;<strong>对于空类(不含任何数据成员或者虚函数)，sizeof返回的结果为1，C++标准规定不同的对象不能拥有相同的地址，所有即使是空类在实例化时也需要一个独一无二的地址，所以编译器会为空类添加一个隐含的字节</strong>  </p>
<p>&emsp;sizeof并不实际计算其运算对象的值，因此在sizeof的运算对象中解引用一个无效指针仍是一种安全的行为，因为指针实际上并没有被调用；或者使用作用域运算符来获取非私有类成员的大小，因为无需提供一个具体的对象。
<code>sizeof(*p); sizeof(Class::private_data); </code>  </p>
<p>&emsp;对char或者类型为char的表达式执行sizeof，结果为1；
对引用类型执行sizeof运算得到被引用对象所占空间的大小；
对指针类型则是得到指针本身所占空间的大小；对解引用指针则是得到指针所指向对象所占空间的大小；  <br />
&emsp;sizeof(string), 无论string里放多长的字符串，它的sizeof()都是固定的，字符串所占的空间是从堆中动态分配的，与sizeof()无关。常见的实现有sizeof(string)=4 or 16 or 32, 取决于编译器。<br />
&emsp;对函数使用sizeof，在编译阶段会被函数返回值的类型取代;<br />
&emsp;数组的大小是各维数的乘积*数组元素的大小; <br />
<code>char c[2][3] = {"a", "bb"}; sizeof(c) = 6;</code></p>
<h2 id="return">return</h2>
<p>&emsp;不要返回局部对象的引用和指针，因为函数完成后，它所占用的存储空间也随之被释放掉，因此局部变量的引用或指针将指向不再有效的内存区域。<br />
&emsp;函数的返回类型决定函数调用是否是左值，调用一个返回引用的函数得到左值，其他返回类型得到右值，因此可以为返回类型是非常量引用的函数的结果赋值。<br />
&emsp;声明一个返回数组指针的函数:<br />
&emsp;
<code>type (*func(param_list))[dimension];
  //使用尾置返回类型, 这里的auto是为了表示函数真正的返回类型跟在形参列表之后
  auto func(param_list) -&gt; int( * )[dimension];
</code>  </p>
<h2 id="volatile">volatile</h2>
<p>&emsp;volatile 关键字是一种类型修饰符<br />
&emsp;volatile 关键字声明的变量，每次访问时都必须从内存中取出值（没有被 volatile 修饰的变量，可能由于编译器的优化，从 CPU 寄存器中取值，而实际的变量由于某些编译器未知的因素（操作系统、硬件、其它线程等）发送更改， 因此使用 volatile 告诉编译器不应对这样的对象进行优化。<br />
&emsp;const 可以是 volatile （如只读的状态寄存器）; 指针可以是 volatile.  </p>
<h2 id="extern-c">链接指示:extern C</h2>
<p>&emsp; <strong>C++使用链接指示指出任意非C++函数使用的语言</strong>  </p>
<pre><code class="language-C">     //单语句链接指示，
     extern &quot;C&quot; size_t strlen(const char*);
     //复合语句链接指示
     extern &quot;C&quot;{
          #include &lt;string.h&gt; //此时认为该头文件包含的所有函数都是由C语言编写的
          int strcmp(const char*);
     }

     //指向C函数的指针与指向C++函数的指针是不同的
     extern &quot;C&quot; void(*pf)(int); //使用pf调用函数时，认为调用的是一个C函数，且不能用来指向一个C++函数
     //指向C++函数的指针和指向C函数的指针不能互相转换

     //链接指示对整个声明有效
     // f1是一个C函数，接收一个函数指针参数，且该函数指针指向的必须是一个C函数
     extern &quot;C&quot; void fun(void(*)(int));
</code></pre>
<p>&emsp;C语言不支持函数重载，因此一个C链接指示只能用来说明重载函数中的某一个。</p>
<h2 id="_4">字节对齐</h2>
<p>1) 数据类型自身的对齐值：char型数据自身对齐值为1字节，short型数据为2字节，int/float型为4字节，double型为8字节。
2) 结构体或类的自身对齐值：其成员中自身对齐值最大的那个值。
3) 指定对齐值：#pragma pack (value)时的指定对齐值value。
4) 数据成员、结构体和类的有效对齐值：自身对齐值和指定对齐值中较小者，即有效对齐值=min{自身对齐值，当前指定的pack值}。</p>
<pre><code class="language-C">Class A{int i; char c;}     sizeof(A) = 4+4=8;
Class B{int i; char c; char c2; double d;} sizeof(B) = 8+8=16;
Class C{int i; char c; char c2; int i2;} sizeof(C) = 4+4+4=12; // 两个char共占用2个字节，对齐后，占用4个字节
Class D {int i; char c2; int i2; char c;} sizeof(D)=4+4+4+4=16;
</code></pre>
<h2 id="_5">字面值类型</h2>
<p>&emsp;用来声明constexpr时用到的类型；<strong>算术类型、引用、指针和字面值常量类都属于字面值类型</strong>，自定义的类、IO库、string类型都不属于字面值类型，也就不能被定义为constexpr。  </p>
<h2 id="using">using</h2>
<ul>
<li><strong><em>using-directives for namespaces and using-declarations for namespace members.</em></strong>  </li>
</ul>
<pre><code class="language-C">using namespace std;
using std::string;
</code></pre>
<p>&emsp;&emsp;头文件如果在其顶层作用域中含有此类说明，则会将相应的命名空间或name注入到所有包含了该头文件的文件中。  </p>
<ul>
<li>
<p><strong><em>using-declarations for class members</em></strong><br />
&emsp;在派生类内部使用using说明，可以将其直接或间接基类中的<strong>任何可访问成员</strong>标记出来，<strong>using声明语句中名字的访问权限由该using声明语句前的访问说明符决定，与派生访问说明符无关。</strong>  </p>
</li>
<li>
<p><strong><em>type alias and alias template declaration</em></strong>  </p>
</li>
</ul>
<pre><code class="language-C">     // type alias
     using func = void(*)(int, int);
     // 等价于
     typedef void(*func)(int, int);

     template&lt;typename T&gt;
     class C{
          using value_type=T;
     }

     // alias template
     template&lt;class CharT&gt; using myString=std::basic_string&lt;Chart, std::char_traits&lt;CharT&gt;&gt;
</code></pre>
<h2 id="_6">命名空间</h2>
<ul>
<li>
<p>namespace(命名空间)：即可定义在全局作用域内，也可定义在其他命名空间中，但不能定义在函数或类的内部。命名空间作用域后无须分号。<br />
namespace的别名：<br />
namespace primer = cplusplus_primer;<br />
primer是命名空间cplusplus_primer的别名，两者等价。且可以存在多个别名。  </p>
</li>
<li>
<p>内联命名空间：c++11新引入的一种嵌套命名空间，内联命名空间中的名字可以被外层命名空间直接使用。  </p>
</li>
<li>未命名的命名空间：仅在特定文件内部有效，作用范围不会跨越多个不同文件；
其中定义的名字的作用域与该命名空间所在的作用域相同，因此未命名空间中的名字要与全局作用域中的名字有所区别。  </li>
<li>重载与命名空间：一个using说明包含了该函数的所有版本，并且会重载该声明语句所属作用域中已有的其他同名函数；若所属作用域中已经有一个函数与新引入的函数同名且形参列表相同，则该using声明将引发错误。
对于using指示来说，引入一个与已有函数形参列表完全相同的函数并不会产生错误。</li>
</ul>
<h2 id="tips">tips</h2>
<ul>
<li>商取整<br />
&emsp;c++11标准规定商一律向0取整；m%n如果不等于0，则符号与m相同，即除了-m溢出的特殊情况，（-m）%n 等于-（m%n），m%(-n)等于m%n。  </li>
<li>交换两个int变量<br />
<code>a=(b^=a^=b)^a;</code>  </li>
<li>前置/后置 自增/自减运算及解引用<br />
* iter++ 等价于 *(iter++); //后自增运算符优先级高于解引用符，但由于后置运算符返回的iter原值的副本，因此
<code>auto a = <em>iter++; auto b = </em>iter</code>, 其中a==b，但前者此时iter已经指向下一位元素。
而前置运算符则返回的是改变后的iter.  </li>
<li>object based: 面对的是单一的class的设计;<br />
object oriented: 面对的是多重class之间的设计, classes 和 classes之间的关系。  </li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
